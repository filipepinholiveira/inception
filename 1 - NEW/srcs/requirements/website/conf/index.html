<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inception</title>
</head>

<body>

    <h1>Inception</h1>

    <h2>Table of Contents</h2>

    <ul>
        <li><a href="#setting-up-shared-folder-in-ubuntu-vm-with-virtualbox-guest-additions">Setting up Shared Folder
                in Ubuntu VM with VirtualBox Guest Additions</a>
            <ul>
                <li><a href="#install-virtualbox-guest-additions">Install VirtualBox Guest Additions</a></li>
                <li><a href="#update-and-install-required-packages">Update and Install Required Packages</a></li>
                <li><a href="#try-to-mount-the-guest-additions">Try to Mount the Guest Additions</a></li>
                <li><a href="#create-a-shared-folder">Create a Shared Folder</a></li>
                <li><a href="#mount-the-shared-folder">Mount the Shared Folder</a></li>
                <li><a href="#mount-a-permanent-shared-folder">Mount a Permanent Shared Folder</a></li>
            </ul>
        </li>
        <li><a href="#inception-1">Inception</a>
            <ul>
                <li><a href="#install-all-the-requirements">Install all the requirements</a>
                    <ul>
                        <li><a href="#uninstall-all-the-previous-packages">Uninstall all the previous packages</a>
                        </li>
                    </ul>
                </li>
                <li><a href="#docker-compose">Docker-Compose</a>
                    <ul>
                        <li><a href="#commands">Commands</a></li>
                        <li><a href="#file">File</a></li>
                    </ul>
                </li>
                <li><a href="#mariadb">Mariadb</a>
                    <ul>
                        <li><a href="#install">Install</a></li>
                        <li><a href="#flags">Flags</a></li>
                        <li><a href="#commands-1">Commands</a></li>
                        <li><a href="#config">Config</a></li>
                        <li><a href="#example-of-a-docker-file">Example of a Docker File</a></li>
                        <li><a href="#example-of-entrypoint.sh">Example of an Entrypoint.sh</a></li>
                    </ul>
                </li>
                <li><a href="#wordpress">Wordpress</a>
                    <ul>
                        <li><a href="#install-1">Install</a></li>
                        <li><a href="#config-1">Config</a></li>
                        <li><a href="#example-of-a-docker-file_1">Example of a Docker File</a></li>
                        <li><a href="#example-of-entrypoint.sh_1">Example of an Entrypoint.sh</a></li>
                    </ul>
                </li>
                <li><a href="#nginx">Nginx</a>
                    <ul>
                        <li><a href="#install-2">Install</a></li>
                        <li><a href="#config-2">Config</a></li>
                        <li><a href="#example-of-a-docker-file_2">Example of a Docker File</a></li>
                        <li><a href="#example-of-entrypoint.sh_2">Example of an Entrypoint.sh</a></li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>

    <hr>

    <h2 id="setting-up-shared-folder-in-ubuntu-vm-with-virtualbox-guest-additions">Setting up Shared Folder in
        Ubuntu VM with VirtualBox Guest Additions</h2>

    <h3 id="install-virtualbox-guest-additions">Install VirtualBox Guest Additions</h3>

    <ol>
        <li>Start your Ubuntu VM.</li>
        <li>In the VirtualBox menu, navigate to "Devices" &gt; "Insert Guest Additions CD image."</li>
    </ol>

    <h3 id="update-and-install-required-packages">Update and Install Required Packages</h3>

    <pre><code>sudo apt update -y
sudo apt upgrade -y
sudo apt install -y \
     build-essential \
     dkms \
     linux-headers-$(uname -r)
</code></pre>

    <h3 id="try-to-mount-the-guest-additions">Try to Mount the Guest Additions</h3>

    <pre><code>mkdir /media/cdrom
sudo mount /dev/cdrom /media/cdrom
cd /media/cdrom
sudo ./VBoxLinuxAdditions.run
sudo shutdown -r now
</code></pre>

    <p>If this does not work means that the machine already mounted the CD, so try to enter in the next path to install
        the Guest Additions:</p>

    <pre><code>cd /media/$(hostname)
cd /VBox_GAs_&lt;version&gt;
sudo ./VBoxLinuxAdditions.run
sudo shutdown -r now
</code></pre>

    <h3 id="create-a-shared-folder">Create a Shared Folder</h3>

    <ul>
        <li>In VirtualBox, select your VM.</li>
        <li>Navigate to "Settings" &gt; "Shared Folders."</li>
        <li>Add a new shared folder, specifying the folder path on your host machine.</li>
    </ul>

    <h3 id="mount-the-shared-folder">Mount the Shared Folder</h3>

    <h4>Change the name Shared with the name of your Shared Folder</h4>

    <pre><code>sudo mkdir /mnt/shared
sudo mount -t vboxsf Shared /mnt/shared/
cd /mnt/shared
</code></pre>

    <h3 id="mount-a-permenent-shared-folder">Mount a Permanent Shared Folder</h3>

    <h4>Open the file with sudo</h4>

    <pre><code>sudo nano /etc/fstab
</code></pre>

    <h4>Add the Next Line</h4>

    <pre><code>&lt;Shared_Folder_Name&gt; /mnt/shared vboxsf defaults 0 0
</code></pre>

    <h4>Save the file and try this</h4>

    <pre><code>systemctl daemon-reload # reload the config of fstab
sudo mount -a
</code></pre>

    <hr>

    <h2 id="inception-1">Inception</h2>

    <p><strong>Host Setup</strong></p>

    <ul>
        <li>In order to test the website, we need to add the domain to the <code>/etc/hosts</code> to test if the website
            is working.</li>
    </ul>

    <h3 id="install-all-the-requirements">Install all the requirements</h3>

    <pre><code>sudo apt update
sudo apt install -y curl wget git unzip software-properties-common
</code></pre>

    <h3 id="uninstall-all-the-previous-packages">Uninstall all the previous packages</h3>

    <pre><code>sudo apt remove docker docker-engine docker.io containerd runc
</code></pre>

    <p>If you get an error after running the above command, it's okay. The goal is to ensure that old Docker versions
        are removed.</p>

    <h3 id="docker-compose">Docker-Compose</h3>

    <p>Run the following commands:</p>

    <h4 id="commands">Commands</h4>

    <pre><code>sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)"
    -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose
docker-compose --version
</code></pre>

    <h4 id="file">File</h4>

    <pre><code>sudo nano /usr/local/bin/docker-compose
</code></pre>

    <p>Write the following content:</p>

    <pre><code>#!/bin/sh
"exec" "docker-compose" "-f" "/path/to/your/docker-compose.yml" "$@"
</code></pre>

    <p>Save and close the file.</p>

    <p>Make the file executable:</p>

    <pre><code>sudo chmod +x /usr/local/bin/docker-compose
</code></pre>

    <h3 id="mariadb">Mariadb</h3>

    <h4 id="install">Install</h4>

    <pre><code>docker pull mariadb
</code></pre>

    <h4 id="flags">Flags</h1000
  ></h4>

    <pre><code>--name=inception-mariadb \
-e MYSQL_ROOT_PASSWORD=root \
-e MYSQL_DATABASE=inception \
-e MYSQL_USER=inception \
-e MYSQL_PASSWORD=inception \
-d mariadb
</code></pre>

    <h4 id="commands-1">Commands</h4>

    <p>Execute the following commands:</p>

    <pre><code>docker exec -it inception-mariadb mysql -u root -p
CREATE DATABASE inception;
GRANT ALL ON inception.* TO 'inception' IDENTIFIED BY 'inception';
FLUSH PRIVILEGES;
</code></pre>

    <h4 id="config">Config</h4>

    <p>Create a file named <code>mariadb.cnf</code> in <code>/mnt/shared/mariadb</code> with the following
        content:</p>

    <pre><code>[mysqld]
character-set-server=utf8mb4
collation-server=utf8mb4_unicode_ci
</code></pre>

    <h4 id="example-of-a-docker-file">Example of a Docker File</h4>

    <p>Create a file named <code>Dockerfile</code> in <code>/mnt/shared/mariadb</code> with the following content:</p>

    <pre><code>FROM mariadb
COPY mariadb.cnf /etc/mysql/conf.d/
</code></pre>

    <h4 id="example-of-entrypoint.sh">Example of an Entrypoint.sh</h4>

    <p>Create a file named <code>entrypoint.sh</code> in <code>/mnt/shared/mariadb</code> with the following
        content:</p>

    <pre><code>#!/bin/bash
set -eu
exec mysqld
</code></pre>

    <h3 id="wordpress">Wordpress</h3>

    <h4 id="install-1">Install</h4>

    <pre><code>docker pull wordpress
</code></pre>

    <h4 id="config-1">Config</h4>

    <pre><code>--name=inception-wordpress \
-e WORDPRESS_DB_HOST=inception-mariadb \
-e WORDPRESS_DB_USER=inception \
-e WORDPRESS_DB_PASSWORD=inception \
-e WORDPRESS_DB_NAME=inception \
-e WORDPRESS_TABLE_PREFIX=wp_ \
-p 8080:80 \
-d wordpress
</code></pre>

    <h4 id="example-of-a-docker-file_1">Example of a Docker File</h4>

    <p>Create a file named <code>Dockerfile</code> in <code>/mnt/shared/wordpress</code> with the following
        content:</p>

    <pre><code>FROM wordpress
COPY wp-config.php /var/www/html/
</code></pre>

    <h4 id="example-of-entrypoint.sh_1">Example of an Entrypoint.sh</h4>

    <p>Create a file named <code>entrypoint.sh</code> in <code>/mnt/shared/wordpress</code> with the following
        content:</p>

    <pre><code>#!/bin/bash
set -eu
exec apache2-foreground
</code></pre>

    <h3 id="nginx">Nginx</h3>

    <h4 id="install-2">Install</h4>

    <pre><code>docker pull nginx
</code></pre>

    <h4 id="config-2">Config</h4>

    <pre><code>--name=inception-nginx \
-p 80:80 \
-v /mnt/shared/wordpress:/var/www/html \
-d nginx
</code></pre>

    <h4 id="example-of-a-docker-file_2">Example of a Docker File</h4>

    <p>Create a file named <code>Dockerfile</code> in <code>/mnt/shared/nginx</code> with the following
        content:</p>

    <pre><code>FROM nginx
COPY default.conf /etc/nginx/conf.d/
</code></pre>

    <h4 id="example-of-entrypoint.sh_2">Example of an Entrypoint.sh</h4>

    <p>Create a file named <code>entrypoint.sh</code> in <code>/mnt/shared/nginx</code> with the following
        content:</p>

    <pre><code>#!/bin/bash
set -eu
exec nginx -g 'daemon off;'
</code></pre>

    <hr>
